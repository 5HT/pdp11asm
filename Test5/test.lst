0001 0000                      		.i8080
0003 0000                      		entry:
0004 0000 C3 4A 00             		    jmp main
0006 0003                      		__padd16:
0007 0003 4E                   		    mov c, m
0008 0004 23                   		    inx h
0009 0005 46                   		    mov b, m
0010 0006 EB                   		    xchg
0011 0007 09                   		    dad b
0012 0008 EB                   		    xchg
0013 0009 72                   		    mov m, d
0014 000A 2B                   		    dcx h
0015 000B 73                   		    mov m, e
0016 000C 69                   		    mov l, c
0017 000D 60                   		    mov h, b
0018 000E C9                   		    ret
0020 000F                      		__sadd16:
0021 000F 4E                   		    mov c, m
0022 0010 23                   		    inx h
0023 0011 46                   		    mov b, m
0024 0012 EB                   		    xchg
0025 0013 0B                   		    dcx b
0026 0014 EB                   		    xchg
0027 0015 73                   		    mov m, e
0028 0016 2B                   		    dcx h
0029 0017 72                   		    mov m, d
0030 0018 C9                   		    ret
0032 0019                      		__sgnb0:
0033 0019 6F                   		    mov l, a
0034 001A 26 00                		    mvi h, 0
0035 001C C9                   		    ret
0037 001D                      		__or16:
0038 001D 7C                   		    mov a, h
0039 001E B2                   		    ora d
0040 001F 67                   		    mov h, a
0041 0020 7D                   		    mov a, l
0042 0021 B3                   		    ora e
0043 0022 6F                   		    mov l, a
0044 0023 C9                   		    ret
0046 0024                      		.include "include/__mul16.inc"
0001 0024                      		__MUL16:
0002 0024 C5                   		  push b
0003 0025 44                   		  mov b, h
0004 0026 4D                   		  mov c, l
0005 0027 21 00 00             		  lxi h, 0
0006 002A 3E 11                		  mvi a, 17
0007 002C                      		__MUL16_1:
0008 002C 3D                   		  dcr a
0009 002D CA 48 00             		  jz __MUL16_4
0010 0030 29                   		  dad h
0011 0031 EB                   		  xchg
0012 0032 D2 3A 00             		  jnc __MUL16_2
0013 0035 29                   		  dad h
0014 0036 23                   		  inx h
0015 0037 C3 3B 00             		  jmp __MUL16_3
0016 003A                      		__MUL16_2:
0017 003A 29                   		  dad h
0018 003B                      		__MUL16_3:
0019 003B EB                   		  xchg
0020 003C D2 2C 00             		  jnc __MUL16_1
0021 003F 09                   		  dad b
0022 0040 D2 2C 00             		  jnc __MUL16_1
0023 0043 13                   		  inx d
0024 0044 C3 2C 00             		  jmp __MUL16_1
0025 0047 C9                   		  ret
0026 0048                      		__MUL16_4:
0027 0048 C1                   		  pop b
0028 0049 C9                   		  ret
0122 004A                      		main:
0122 004A 21 FA FF             		    lxi h, 0FFFAh
0122 004D 39                   		    dad sp
0122 004E F9                   		    sphl
0122 004F                      		//55     uint8_t* addr = (uint8_t*)(0x76D0 + 78*3 + 8);
0122 004F 21 00 00             		    lxi h, 00h
0122 0052 39                   		    dad sp
0122 0053 11 00 00             		    lxi d, 00h
0122 0056 19                   		    dad d
0122 0057 36 C2                		    mvi m, 0C2h
0122 0059 23                   		    inx h
0122 005A 36 77                		    mvi m, 077h
0122 005C                      		//57     for(i=64; i; i--)
0122 005C 21 00 00             		    lxi h, 00h
0122 005F 39                   		    dad sp
0122 0060 11 02 00             		    lxi d, 02h
0122 0063 19                   		    dad d
0122 0064 36 40                		    mvi m, 040h
0122 0066 21 00 00             		    lxi h, 00h
0122 0069 39                   		    dad sp
0122 006A 11 02 00             		    lxi d, 02h
0122 006D 19                   		    dad d
0122 006E 7E                   		    mov a, m
0122 006F B7                   		    ora a
0122 0070 CA 9B 00             		    jz 09Bh
0122 0073                      		//58     {
0122 0073 21 00 00             		    lxi h, 00h
0122 0076 39                   		    dad sp
0122 0077 11 00 00             		    lxi d, 00h
0122 007A 19                   		    dad d
0122 007B 56                   		    mov d, m
0122 007C 23                   		    inx h
0122 007D 66                   		    mov h, m
0122 007E 6A                   		    mov l, d
0122 007F 36 2A                		    mvi m, 02Ah
0122 0081                      		//60 	addr++;
0122 0081 21 00 00             		    lxi h, 00h
0122 0084 39                   		    dad sp
0122 0085 11 00 00             		    lxi d, 00h
0122 0088 19                   		    dad d
0122 0089 11 01 00             		    lxi d, 01h
0122 008C CD 03 00             		    call 03h
0122 008F 21 00 00             		    lxi h, 00h
0122 0092 39                   		    dad sp
0122 0093 11 02 00             		    lxi d, 02h
0122 0096 19                   		    dad d
0122 0097 35                   		    dcr m
0122 0098 C3 66 00             		    jmp 066h
0122 009B                      		//63     addr = (uint8_t*)(0x76D0 + 78*(3+24) + 8);
0122 009B 21 00 00             		    lxi h, 00h
0122 009E 39                   		    dad sp
0122 009F 11 00 00             		    lxi d, 00h
0122 00A2 19                   		    dad d
0122 00A3 36 12                		    mvi m, 012h
0122 00A5 23                   		    inx h
0122 00A6 36 7F                		    mvi m, 07Fh
0122 00A8                      		//64     for(i=64; i; i--)
0122 00A8 21 00 00             		    lxi h, 00h
0122 00AB 39                   		    dad sp
0122 00AC 11 02 00             		    lxi d, 02h
0122 00AF 19                   		    dad d
0122 00B0 36 40                		    mvi m, 040h
0122 00B2 21 00 00             		    lxi h, 00h
0122 00B5 39                   		    dad sp
0122 00B6 11 02 00             		    lxi d, 02h
0122 00B9 19                   		    dad d
0122 00BA 7E                   		    mov a, m
0122 00BB B7                   		    ora a
0122 00BC CA E7 00             		    jz 0E7h
0122 00BF                      		//65     {
0122 00BF 21 00 00             		    lxi h, 00h
0122 00C2 39                   		    dad sp
0122 00C3 11 00 00             		    lxi d, 00h
0122 00C6 19                   		    dad d
0122 00C7 56                   		    mov d, m
0122 00C8 23                   		    inx h
0122 00C9 66                   		    mov h, m
0122 00CA 6A                   		    mov l, d
0122 00CB 36 2A                		    mvi m, 02Ah
0122 00CD                      		//67 	addr++;
0122 00CD 21 00 00             		    lxi h, 00h
0122 00D0 39                   		    dad sp
0122 00D1 11 00 00             		    lxi d, 00h
0122 00D4 19                   		    dad d
0122 00D5 11 01 00             		    lxi d, 01h
0122 00D8 CD 03 00             		    call 03h
0122 00DB 21 00 00             		    lxi h, 00h
0122 00DE 39                   		    dad sp
0122 00DF 11 02 00             		    lxi d, 02h
0122 00E2 19                   		    dad d
0122 00E3 35                   		    dcr m
0122 00E4 C3 B2 00             		    jmp 0B2h
0122 00E7                      		//70     addr = (uint8_t*)(0x76D0 + 78*3 + 8);
0122 00E7 21 00 00             		    lxi h, 00h
0122 00EA 39                   		    dad sp
0122 00EB 11 00 00             		    lxi d, 00h
0122 00EE 19                   		    dad d
0122 00EF 36 C2                		    mvi m, 0C2h
0122 00F1 23                   		    inx h
0122 00F2 36 77                		    mvi m, 077h
0122 00F4                      		//71     for(i=25; i; i--)
0122 00F4 21 00 00             		    lxi h, 00h
0122 00F7 39                   		    dad sp
0122 00F8 11 02 00             		    lxi d, 02h
0122 00FB 19                   		    dad d
0122 00FC 36 19                		    mvi m, 019h
0122 00FE 21 00 00             		    lxi h, 00h
0122 0101 39                   		    dad sp
0122 0102 11 02 00             		    lxi d, 02h
0122 0105 19                   		    dad d
0122 0106 7E                   		    mov a, m
0122 0107 B7                   		    ora a
0122 0108 CA 5F 01             		    jz 015Fh
0122 010B                      		//72     {
0122 010B 21 00 00             		    lxi h, 00h
0122 010E 39                   		    dad sp
0122 010F 11 00 00             		    lxi d, 00h
0122 0112 19                   		    dad d
0122 0113 56                   		    mov d, m
0122 0114 23                   		    inx h
0122 0115 66                   		    mov h, m
0122 0116 6A                   		    mov l, d
0122 0117 36 2A                		    mvi m, 02Ah
0122 0119                      		//74 	addr+=63;
0122 0119 21 00 00             		    lxi h, 00h
0122 011C 39                   		    dad sp
0122 011D 11 00 00             		    lxi d, 00h
0122 0120 19                   		    dad d
0122 0121 E5                   		    push h
0122 0122 56                   		    mov d, m
0122 0123 23                   		    inx h
0122 0124 66                   		    mov h, m
0122 0125 6A                   		    mov l, d
0122 0126 11 3F 00             		    lxi d, 03Fh
0122 0129 19                   		    dad d
0122 012A D1                   		    pop d
0122 012B EB                   		    xchg
0122 012C 73                   		    mov m, e
0122 012D 23                   		    inx h
0122 012E 72                   		    mov m, d
0122 012F                      		//75 	*addr = '*';
0122 012F 21 00 00             		    lxi h, 00h
0122 0132 39                   		    dad sp
0122 0133 11 00 00             		    lxi d, 00h
0122 0136 19                   		    dad d
0122 0137 56                   		    mov d, m
0122 0138 23                   		    inx h
0122 0139 66                   		    mov h, m
0122 013A 6A                   		    mov l, d
0122 013B 36 2A                		    mvi m, 02Ah
0122 013D                      		//76 	addr+=78-63;
0122 013D 21 00 00             		    lxi h, 00h
0122 0140 39                   		    dad sp
0122 0141 11 00 00             		    lxi d, 00h
0122 0144 19                   		    dad d
0122 0145 E5                   		    push h
0122 0146 56                   		    mov d, m
0122 0147 23                   		    inx h
0122 0148 66                   		    mov h, m
0122 0149 6A                   		    mov l, d
0122 014A 11 0F 00             		    lxi d, 0Fh
0122 014D 19                   		    dad d
0122 014E D1                   		    pop d
0122 014F EB                   		    xchg
0122 0150 73                   		    mov m, e
0122 0151 23                   		    inx h
0122 0152 72                   		    mov m, d
0122 0153 21 00 00             		    lxi h, 00h
0122 0156 39                   		    dad sp
0122 0157 11 02 00             		    lxi d, 02h
0122 015A 19                   		    dad d
0122 015B 35                   		    dcr m
0122 015C C3 FE 00             		    jmp 0FEh
0122 015F                      		//79     uint8_t x=0, y=0;
0122 015F 21 00 00             		    lxi h, 00h
0122 0162 39                   		    dad sp
0122 0163 11 03 00             		    lxi d, 03h
0122 0166 19                   		    dad d
0122 0167 36 00                		    mvi m, 00h
0122 0169 21 00 00             		    lxi h, 00h
0122 016C 39                   		    dad sp
0122 016D 11 04 00             		    lxi d, 04h
0122 0170 19                   		    dad d
0122 0171 36 00                		    mvi m, 00h
0122 0173                      		//80     for(;;)
0122 0173                      		//81     {
0122 0173 21 00 00             		    lxi h, 00h
0122 0176 39                   		    dad sp
0122 0177 11 05 00             		    lxi d, 05h
0122 017A 19                   		    dad d
0122 017B E5                   		    push h
0122 017C CD 1B F8             		    call 0F81Bh
0122 017F 5F                   		    mov e, a
0122 0180 E1                   		    pop h
0122 0181 73                   		    mov m, e
0122 0182                      		//84 	switch(a)
0122 0182 21 00 00             		    lxi h, 00h
0122 0185 39                   		    dad sp
0122 0186 11 05 00             		    lxi d, 05h
0122 0189 19                   		    dad d
0122 018A 7E                   		    mov a, m
0122 018B 6F                   		    mov l, a
0122 018C 26 00                		    mvi h, 00h
0122 018E EB                   		    xchg
0122 018F 21 F8 FF             		    lxi h, 0FFF8h
0122 0192 19                   		    dad d
0122 0193 7D                   		    mov a, l
0122 0194 B4                   		    ora h
0122 0195 CA E9 01             		    jz 01E9h
0122 0198 21 E8 FF             		    lxi h, 0FFE8h
0122 019B 19                   		    dad d
0122 019C 7D                   		    mov a, l
0122 019D B4                   		    ora h
0122 019E CA 02 02             		    jz 0202h
0122 01A1 21 E7 FF             		    lxi h, 0FFE7h
0122 01A4 19                   		    dad d
0122 01A5 7D                   		    mov a, l
0122 01A6 B4                   		    ora h
0122 01A7 CA B6 01             		    jz 01B6h
0122 01AA 21 E6 FF             		    lxi h, 0FFE6h
0122 01AD 19                   		    dad d
0122 01AE 7D                   		    mov a, l
0122 01AF B4                   		    ora h
0122 01B0 CA CF 01             		    jz 01CFh
0122 01B3 C3 1C 02             		    jmp 021Ch
0122 01B6                      		//86 	    case 0x19: // up
0122 01B6                      		//87 		if(y==0) continue;
0122 01B6 21 00 00             		    lxi h, 00h
0122 01B9 39                   		    dad sp
0122 01BA 11 04 00             		    lxi d, 04h
0122 01BD 19                   		    dad d
0122 01BE 7E                   		    mov a, m
0122 01BF B7                   		    ora a
0122 01C0 CA 73 01             		    jz 0173h
0122 01C3                      		//88 		y--;
0122 01C3 21 00 00             		    lxi h, 00h
0122 01C6 39                   		    dad sp
0122 01C7 11 04 00             		    lxi d, 04h
0122 01CA 19                   		    dad d
0122 01CB 35                   		    dcr m
0122 01CC                      		//89 		break;
0122 01CC C3 1F 02             		    jmp 021Fh
0122 01CF                      		//90 	    case 0x1A: // down
0122 01CF                      		//91 		if(y==24) continue;
0122 01CF 21 00 00             		    lxi h, 00h
0122 01D2 39                   		    dad sp
0122 01D3 11 04 00             		    lxi d, 04h
0122 01D6 19                   		    dad d
0122 01D7 7E                   		    mov a, m
0122 01D8 FE 18                		    cpi 018h
0122 01DA CA 73 01             		    jz 0173h
0122 01DD                      		//92 		y++;
0122 01DD 21 00 00             		    lxi h, 00h
0122 01E0 39                   		    dad sp
0122 01E1 11 04 00             		    lxi d, 04h
0122 01E4 19                   		    dad d
0122 01E5 34                   		    inr m
0122 01E6                      		//93 		break;
0122 01E6 C3 1F 02             		    jmp 021Fh
0122 01E9                      		//94 	    case 0x08: // left
0122 01E9                      		//95 		if(x==0) continue;
0122 01E9 21 00 00             		    lxi h, 00h
0122 01EC 39                   		    dad sp
0122 01ED 11 03 00             		    lxi d, 03h
0122 01F0 19                   		    dad d
0122 01F1 7E                   		    mov a, m
0122 01F2 B7                   		    ora a
0122 01F3 CA 73 01             		    jz 0173h
0122 01F6                      		//96 		x--;
0122 01F6 21 00 00             		    lxi h, 00h
0122 01F9 39                   		    dad sp
0122 01FA 11 03 00             		    lxi d, 03h
0122 01FD 19                   		    dad d
0122 01FE 35                   		    dcr m
0122 01FF                      		//97 		break;
0122 01FF C3 1F 02             		    jmp 021Fh
0122 0202                      		//98 	    case 0x18: // right
0122 0202                      		//99 		if(x==64) continue;
0122 0202 21 00 00             		    lxi h, 00h
0122 0205 39                   		    dad sp
0122 0206 11 03 00             		    lxi d, 03h
0122 0209 19                   		    dad d
0122 020A 7E                   		    mov a, m
0122 020B FE 40                		    cpi 040h
0122 020D CA 73 01             		    jz 0173h
0122 0210                      		//100 		x++;
0122 0210 21 00 00             		    lxi h, 00h
0122 0213 39                   		    dad sp
0122 0214 11 03 00             		    lxi d, 03h
0122 0217 19                   		    dad d
0122 0218 34                   		    inr m
0122 0219                      		//101 		break;
0122 0219 C3 1F 02             		    jmp 021Fh
0122 021C                      		//102 	    default:
0122 021C                      		//103 		continue;
0122 021C C3 73 01             		    jmp 0173h
0122 021F                      		//105 	*(uint8_t*)((0x76D0 + 78*3 + 8) + y*78 + x) = 'X';
0122 021F 21 00 00             		    lxi h, 00h
0122 0222 39                   		    dad sp
0122 0223 11 04 00             		    lxi d, 04h
0122 0226 19                   		    dad d
0122 0227 7E                   		    mov a, m
0122 0228 6F                   		    mov l, a
0122 0229 26 00                		    mvi h, 00h
0122 022B 11 4E 00             		    lxi d, 04Eh
0122 022E CD 24 00             		    call 024h
0122 0231 11 C2 77             		    lxi d, 077C2h
0122 0234 19                   		    dad d
0122 0235 E5                   		    push h
0122 0236 21 02 00             		    lxi h, 02h
0122 0239 39                   		    dad sp
0122 023A 11 03 00             		    lxi d, 03h
0122 023D 19                   		    dad d
0122 023E 5E                   		    mov e, m
0122 023F E1                   		    pop h
0122 0240 16 00                		    mvi d, 00h
0122 0242 19                   		    dad d
0122 0243 36 58                		    mvi m, 058h
0122 0245                      		//106 	while(bioskey() != 0xFF);
0122 0245 CD 1B F8             		    call 0F81Bh
0122 0248 FE FF                		    cpi 0FFh
0122 024A C2 45 02             		    jnz 0245h
0122 024D C3 73 01             		    jmp 0173h
0122 0250                      		//109     for(;;);    
0122 0250 C3 50 02             		    jmp 0250h
0122 0253 21 06 00             		    lxi h, 06h
0122 0256 39                   		    dad sp
0122 0257 F9                   		    sphl
0122 0258 C9                   		    ret
0123 0259 